<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<style type="text/css">
	* {
	margin: 0;
	padding: 0;
}
body {
	width: 900px;
	margin: 0 auto;
}
.box {
	height: 600px;
	border: 1px solid red;
	position: relative;
	background-color: gray;
}
div input {
	width: 100px;
	height: 30px;
	border: none;
	background-color: orange;
	background: linear-gradient(to bottom, red, yellow);
	border-radius: 5px;
	outline: none;
}
div input:first-of-type {
	margin-left: 300px;
}
</style>
</head>
<body>
<div class="box" id="box"></div>
<div>
	<input type="button" value="å¼€å§‹"/>
	<input type="button" value="æš‚åœ"/>
</div>
<script type="text/javascript">
	var flag = false
	var btn01 = document.querySelectorAll("input")[0]
	var btn02 = document.querySelectorAll("input")[1]
	//åˆ›å»ºåœ°é¼ å‡½æ•°
	function createMouse () {
		var mouseImg = document.createElement("img");
		mouseImg.setAttribute("src", "img/mouse.png");
		mouseImg.style.width = '100px';
		mouseImg.style.height = '100px';
		mouseImg.style.position = "absolute";
		//ç»™æ¯ä¸ªç”Ÿæˆçš„è€é¼ è®¾ç½®ç‚¹å‡»äº‹ä»¶
		mouseImg.onclick = function  () {
			//æŠŠè¿™ä¸ªimgæ ‡ç­¾ä»domä¸­ç§»é™¤ï¼š
			this.parentElement.removeChild(this);
		}
		return mouseImg;
	}
	var intervalId;
	/*åå¤åˆ›å»ºåœ°é¼ å‡½æ•°*/
	function rePeatCreateMouse(){
		//è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯éš”500msåˆ›å»ºä¸€åªæ–°è€é¼ 
		intervalId = window.setInterval(function () {
			var mouse = createMouse();
			var left = randomInt(0, 800);
			var top = randomInt(0, 500);
			mouse.style.left = left + "px";
			mouse.style.top = top + "px";
			box.appendChild(mouse);
			//è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ¥å†³å®šæ˜¯å¦ç»“æŸæ¸¸æˆ
			judgeGameOver();
		}, 500);
	}
	/*ç”Ÿæˆéšæœºæ•´æ•°*/
	function randomInt (m, n) {
		return parseInt(Math.random() * (n - m + 1) + m);   // 5 10
	}
	//è®©æ¸¸æˆç»“æŸ
	function judgeGameOver () {
		var mouseCount = box.childElementCount;
		//å¦‚æœè€é¼ æ•°é‡å¤§äºç­‰äº10çš„è¯ï¼Œå°±ã€ç»“æŸæ¸¸æˆã€‘
		if(mouseCount >= 10){
			//ç»“æŸå‘¨æœŸä»»åŠ¡
			window.clearInterval(intervalId);
			//è™½ç„¶intervalIdå·²ç»è¢«æ¸…ç©ºï¼Œä½†æ˜¯ä»ç„¶æ˜¯1
			console.log('intervalId = ' + intervalId)
			//æ‰€ä»¥è¦è®¾ç½®intervalId = 0
			intervalId = 0;
			//æ¸…ç©ºæ‰€æœ‰çš„è€é¼ 
			for(var i = 0; i < mouseCount; i++){
				box.removeChild(box.children[0]);
			}
			var endImg = document.createElement("img");
			endImg.style.position = "absolute";
			endImg.className = "end";
			endImg.src = "img/end.png";
			endImg.onclick = null;
			endImg.style.width = '500px';
			endImg.style.height = '500px';
			endImg.style.left = "250px";
			box.appendChild(endImg);
			//å¦‚æœæ¸¸æˆå·²ç»ç»“æŸï¼Œåˆ™è®©æš‚åœæŒ‰é’®æ— æ³•å†æš‚åœ
			//è®¾ç½®ä¸€ä¸ªæ ‡è®°å¤‡ç”¨
			flag = true
			//å¦‚æœæ¸¸æˆå·²ç»ç»“æŸï¼Œåˆ™å°†btn01è®¾ç½®ä¸ºã€é‡æ–°å¼€å§‹ã€‘
			btn01.value = 'é‡æ–°å¼€å§‹'
		}
	}
	/*ç‚¹å‡»å¼€å§‹æŒ‰é’®çš„æ—¶å€™æ‰§è¡Œ*/
	btn01.onclick = function () {
		//å¦‚æœintervalIdå·²ç»å­˜åœ¨ï¼Œåˆ™ç‚¹å‡»æ— æ•ˆ
		//ä¹Ÿå°±æ˜¯è¯´ï¼Œå®šæ—¶å™¨å­˜åœ¨çš„è¯ï¼Œä¸ä¼šé‡å¤åˆ›å»ºå®šæ—¶å™¨
		if(intervalId){
			return
		}
		//ç‚¹å‡»å¼€å§‹æŒ‰é’®ï¼Œé¦–å…ˆæ¸…ç©ºå±å¹•ä¸Šçš„æ‰€æœ‰çš„è€é¼ 
		for(var i = 0; i < box.children.length; ){
			box.removeChild(box.children[i]);
		}
		//å¦‚æœæ˜¾ç¤ºä¸ºã€é‡æ–°å¼€å§‹ã€‘çš„è¯ï¼Œåˆ™ã€é‡æ–°å¼€å§‹æ¸¸æˆã€‘
		if(this.value == 'é‡æ–°å¼€å§‹'){
			//é‡æ–°å¼€å§‹åˆ›å»ºè€é¼ 
			rePeatCreateMouse()
			//å¦‚æœå·²ç»ã€é‡æ–°å¼€å§‹ã€‘åˆ™è®¾ç½®ä¸ºå¯ä»¥ç»§ç»­æš‚åœ
			flag = false
			this.value = 'å¼€å§‹'
		}else if(this.value == 'å¼€å§‹'){
			//åˆ›å»ºè€é¼ ğŸ­
			rePeatCreateMouse()
			this.value = 'é‡æ–°å¼€å§‹'
		}
	}
	/*ç‚¹å‡»æš‚åœæŒ‰é’®çš„æ—¶å€™æ‰§è¡Œ*/
	btn02.onclick = function (){
		if(flag){
			//å¦‚æœå·²ç»ç»“æŸï¼Œåˆ™æ— æ³•å†ã€ç»§ç»­ã€‘æˆ–è€…ã€æš‚åœã€‘
			//å³ç‚¹å‡»æ— æ•ˆ
			return
		}
		if(this.value == 'æš‚åœ'){
			clearInterval(intervalId);
			this.value = 'ç»§ç»­';
		}else{
			//åå¤åˆ›å»ºåœ°é¼ å‡½æ•°
			rePeatCreateMouse()
			this.value = 'æš‚åœ';
		}
	}
</script>
</body>
</html>
<!--
	1. imgå›¾ç‰‡æ¥è¡¨ç¤ºæ¯ä¸ªè€é¼ 
	2. æ’å…¥å…ƒç´ èŠ‚ç‚¹   img
	3. å®šæ—¶å™¨å»æ¯éš”ä¸€æ®µæ—¶é—´å»ç”Ÿæˆä¸€ä¸ªè€é¼ 
	4. æ€ä¹ˆè®©è€é¼ æ¶ˆå¤±
-->